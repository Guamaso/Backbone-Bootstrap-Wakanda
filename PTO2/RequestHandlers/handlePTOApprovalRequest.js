function ptoApproval(request, response) {	var params = request.rawURL.split("/"),        requestID = params[2],        approvePassword = params[3],        approveID = params[4],        approvalString = params[5],        ha1 = directory.computeHA1(approveID, approvePassword),        sessionRef = currentSession(), // Get session.        promoteToken = sessionRef.promoteWith("Administrator"), //temporarily make this session Administrator level.        requestToApprove = ds.Request(requestID),        requestorName = requestToApprove.owner.fullName,      	requestorID = requestToApprove.owner.id,        returnMessage = "",        requestorResponseMessage = "",        html = "";                            	response.contentType = 'text/html';		if (ha1 === requestToApprove.approveHA1Key) {		if (approvalString === "approve") {			requestorResponseMessage = "Approved";			requestToApprove.status = "Approved";			requestToApprove.save();			html += "Status set to <strong>Approved</strong> for request: " + requestID + ".<br/>";			html += "Requestor: " + requestorName + ".</br></br>";			html += "Request details: <br/>"; //+ requestToApprove.hours + "/" + requestToApprove.compensation + "/" + requestToApprove.dateString;			html += "Hours: " + requestToApprove.hours + ".</br>";			html += "Compensation Method: " + requestToApprove.compensation + ".</br>";			html += "Date Requested: " + requestToApprove.dateString + ".</br>";				} else if (approvalString === "reject") {			requestorResponseMessage = "Rejected";			requestToApprove.status = "Rejected";			requestToApprove.save();			html += "Status set to <strong>Rejected</strong> for request: " + requestID + ".<br/>";			html += "Requestor: " + requestorName + ".</br></br>";			html += "Request details: <br/>"; //+ requestToApprove.hours + "/" + requestToApprove.compensation + "/" + requestToApprove.dateString;			html += "Hours: " + requestToApprove.hours + ".</br>";			html += "Compensation Method: " + requestToApprove.compensation + ".</br>";			html += "Date Requested: " + requestToApprove.dateString + ".</br>";		} else {			html += "<h3>Could not recognize the requested operation. The status of Request: " + requestID + "was not changed.</h3>";		}			} else {		html += "<h3>Could not authorize you to update the status of this request.</h3>";	} //end - (ha1 === requestToApprove.approveHA1Key)			//Employee has requesting PTO. Send back status of approval.    var theEmailWorker = new SharedWorker("sharedWorkers/emailDaemon.js", "emailDaemon"),    	thePort = theEmailWorker.port; // MessagePort to communicate with the email shared worker.	thePort.postMessage({		what: 'statusPTOSendMail',		requestStatus: approvalString,		requestID: requestID,		requestorID: requestorID,		hours: requestToApprove.hours,		comp: requestToApprove.compensation,		dateString: requestToApprove.dateString	});		    return html;		sessionRef.unPromote(promoteToken); //put the session back to normal.	} //end - function ptoApproval